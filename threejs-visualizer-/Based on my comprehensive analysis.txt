 Based on my comprehensive analysis of your Three.js visualization project, here's a detailed
  breakdown of the current implementation and what needs to be fixed:

  Current Architecture Overview:

  1. Data Flow:
    - CSV file (/public/unit-data.csv) contains unit information
    - Data is loaded via useCsvUnitData hook using PapaParse
    - Currently filtering ONLY available units in the CSV loader (line 42 in useCsvUnitData.ts)
    - Data is stored in Zustand stores (exploreState and glbState)
  2. 3D Visualization:
    - Using React Three Fiber with Three.js
    - GLB models organized in /public/models/boxes/ directory structure
    - Custom Fresnel materials for unit highlighting
    - HDRI environment map for lighting (kloofendal_48d_partly_cloudy_puresky_2k.hdr)
  3. UI Components:
    - ExploreUnitsPanel - Main unit exploration interface
    - Unit details view with sliding panel animation
    - Request forms for unit inquiries
    - Filter and navigation controls

  Detailed Issues & Solutions:

  1. Unit Availability Filtering Issue

  Problem: Line 42 in useCsvUnitData.ts only includes available units: if (unitName &&
  row.Available === 'Available')
  Solution: Remove this filter to include all units, then handle visibility in the UI layer

  2. Missing Disclaimer Text

  Problem: No disclaimer about "Only available units are displayed"
  Solution: Add disclaimer text in ExploreUnitsPanel header area

  3. Google Sheets Integration

  Problem: Currently using local CSV file
  Solution: Need to implement Google Sheets API integration or use a published CSV URL from Google
   Sheets

  4. Email Functionality

  Problem: Request forms don't send emails
  Solution: Need backend service or email API integration (EmailJS, SendGrid, etc.)

  5. "Request form is closed" Text

  Problem: Couldn't locate this text in the analyzed files
  Solution: Need to search more components or it might be in a different component

  6. Scene Lighting Issues

  Current Settings:
  - Ambient light: intensity 0.05 (very dark)
  - Main directional light: intensity 0.7
  - Fill light: intensity 0.1
  Solution: Increase ambient to 0.2-0.3, main light to 1.0-1.2

  7. Unit Name Display Issue

  Problem: Unit details page shows wrong/missing names
  Root Cause: Complex unit key mapping between CSV data and GLB filenames
  Solution: Improve unit key normalization and matching logic

  8. Floor Plans Not Linked

  Problem: Only one floor plan exists (f280.png)
  Solution: Add all floor plan images and update CSV with correct paths

  9. Share Unit Page

  Current: Basic share functionality using Web Share API
  Solution: Could add social media buttons, QR codes, or custom share modal

  10. HDRI Update

  Current: Using kloofendal_48d_partly_cloudy_puresky_2k.hdr
  Solution: Replace with a brighter, more suitable HDRI

  11. Expand Button Not Working

  Problem: Button exists but no functionality implemented (line 925-931 in ExploreUnitsPanel)
  Solution: Implement modal or fullscreen view for floor plans

  12. Initial Selection Transparency

  Problem: Units showing as solid blocks on first click
  Solution: Check material state management in GLBManager

  13. Camera Focus on Unit

  Problem: No automatic camera adjustment
  Solution: Implement camera animation to focus on selected units

  Data Structure Issues:

  1. CSV Headers: Using "Column 1" for floor plan URLs (should be renamed)
  2. Building/Floor mapping: Some units have empty floors (Tower Building, Stages)
  3. Unit key inconsistencies: Multiple formats (F-100, f-100, f100, etc.)

  Priority Recommendations:

  1. Critical Fixes:
    - Fix availability filtering (impacts core functionality)
    - Fix unit name display (user experience)
    - Brighten scene (visual quality)
  2. Important Features:
    - Google Sheets integration
    - Email functionality
    - Camera focus animation
  3. Nice to Have:
    - Share page improvements
    - HDRI updates
    - Floor plan viewer

  The codebase is well-structured but needs these specific fixes to meet your requirements. The
  main issues stem from data filtering at the wrong layer, incomplete floor plan integration, and
  lighting that's too dark for the realistic look you want.
